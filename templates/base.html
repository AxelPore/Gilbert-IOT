<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}MIDI Converter{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .bg-custom {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .color-picker {
            -webkit-appearance: none;
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            padding: 0;
            cursor: pointer;
        }
        .color-picker::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        .color-picker::-webkit-color-swatch {
            border: none;
            border-radius: 50%;
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-100 min-h-screen" id="mainBody">
    <!-- Navigation Bar -->
    {% if session.user %}
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-xl font-bold text-gray-800">MIDI Converter</a>
                    <a href="/" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700">
                        Home
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/profile" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700">
                        Profile
                    </a>
                    <a href="/logout" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700">
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </nav>
    {% endif %}

    {% block content %}{% endblock %}

    <script>
        // Load saved background settings
        document.addEventListener('DOMContentLoaded', function() {
            const savedBgColor = localStorage.getItem('bgColor') || '#f3f4f6';
            const savedBgImage = localStorage.getItem('bgImage');
            
            if (document.getElementById('bgColor')) {
                document.getElementById('bgColor').value = savedBgColor;
            }
            document.getElementById('mainBody').style.backgroundColor = savedBgColor;
            
            if (savedBgImage) {
                document.getElementById('mainBody').style.backgroundImage = `url(${savedBgImage})`;
                document.getElementById('mainBody').classList.add('bg-custom');
            }
        });

        // Handle background color change
        if (document.getElementById('bgColor')) {
            document.getElementById('bgColor').addEventListener('input', function(e) {
                const color = e.target.value;
                document.getElementById('mainBody').style.backgroundColor = color;
                localStorage.setItem('bgColor', color);
            });
        }

        // Handle background image upload
        if (document.getElementById('bgImage')) {
            document.getElementById('bgImage').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('mainBody').style.backgroundImage = `url(${e.target.result})`;
                        document.getElementById('mainBody').classList.add('bg-custom');
                        localStorage.setItem('bgImage', e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
    </script>
    {% block extra_scripts %}{% endblock %}
</body>
</html> 